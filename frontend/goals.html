<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  </head>

<div class="m-4">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a href="#" class="navbar-brand">BookRex
                <img src="logo.png" height= "45" width = "45" alt="BookRex">
        </a>
            <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav">
                    <a href="home.html" class="nav-item nav-link active">Home</a>
                    <a href="home.html" class="nav-item nav-link active">Bookshelf</a>
                    <a href="#" class="nav-item nav-link active">Forum</a>
                    <a href="goals.html" class="nav-item nav-link active">Reading Goal</a>
                                    </div>
                <div class="navbar-nav ms-auto">
                    <a href="index.html" class="nav-item nav-link active">Login</a>

                </div>
            </div>
        </div>
    </nav>
</div>


        <script>
//var response;
alert('hi');
        function HandleResponse(response){
alert("hi");
        var usergoal = String(JSON.parse(response));
if(usergoal == '1'){
        console.log('hi');
return show();
//document.getElementById("test").style.display = "block";
}
else{
        alert("hi");
        return show1();
//      document.getElementById("container").style.display = "block";
}
}
function sendUser()
{
        var request = new XMLHttpRequest();
        request.open("POST","goals.php",true);
        request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
        request.onreadystatechange= function ()
        {
                
                if ((this.readyState == 4)&&(this.status == 200))
                {

        HandleResponse(this.responseText);     
        document.getElementById("container").style.display = "block";
}

                } 
        
//var usename2 = document.getElementById("username").value;

//sessionStorage.clear();

        user = sessionStorage.getItem("username");
   
request.send("type=user&user="+user);



}

sendUser();
/*
function HandleResponse(response){
alert("hi");
        var usergoal = String(JSON.parse(response));
if(usergoal == '1'){
        console.log('hi');
return show();
//document.getElementById("test").style.display = "block";
}
else{
        alert("hi");
        return show1();
//      document.getElementById("container").style.display = "block";
}
}
*/
function goals()
{
        var request = new XMLHttpRequest();
        request.open("POST","goals.php",true);
        request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
        request.onreadystatechange= function ()
        {

                if ((this.readyState == 4)&&(this.status == 200))
                {
                document.getElementById("container").style.display = "none";
//var goals = document.getElementById("goals").value;



//sessionStorage.setItem("goals", goals);

//let disgoal = sessionStorage.getItem("goals").value;
  //      alert(sessionStorage.getItem("goals"));

document.getElementById("showgoal").innerHTML = "Your goal is to read " + goals+ " books!";

                        return show();


                }
        }
user = sessionStorage.getItem("username");
    var goals = document.getElementById("goals").value;

request.send("type=goals&goals="+goals+"&user="+user);



}

//   alert(sessionStorage.getItem("goals"));


function show1(){
        document.getElementById("container").style.display = "block";


        return false;
}


function show(){
        document.getElementById("test").style.display = "block";


        return false;
}

//var redirect = function(){
//      document.location.href="goalsset.html"
//}




 </script>

<div class = "container hide" id = "container">

        <body class = "bg-light">
  <br><br>
          <div class = "card">

                  <div class = "card-header bg-success text-light">
                 Set a Reading Goal!
                  </div>

                          <div class = "card-body">

                        <h4 id = "showgoal" class = "card-title"></h4>
                        <h5>Finish a book?</h5>

                          </div>
          </div>
        </div>

</div>



</html>

                                                                                                                 
